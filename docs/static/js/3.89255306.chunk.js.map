{"version":3,"sources":["controller/picker.ts","views/sub-views/PickerCol.tsx","views/Picker.tsx","views/PickerView.tsx","site/pages/picker/index.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/createClass.js","controller/event.ts","views/Transition.tsx","views/Sheet.tsx"],"names":["PickerControl","index","maxIdx","colStyle","LINE_HEIGHT","curY","oldY","isAnm","this","translateY","transition","adjustTranslate","adjustTranIdx","curTransLateY","maxTranslate","curPickIdx","Math","abs","round","e","getEventPoint","pageY","getFinallyTranslate","PickerCol","colRef","list","value","onChange","pickControl","findIndex","val","length","initPickerControl","useState","setColStyle","onStartHandler","onStart","onMoveHandler","stopPropagation","preventDefault","onMove","onEndHandler","onEnd","useEffect","eventControl","EventControl","createEventList","listenerAllOfEle","removeAllOfEle","className","ref","ele","style","transform","map","item","key","label","Picker","data","values","pickValues","setValues","colChangeHandler","idx","pickIdx","oldState","splice","pickerClassName","PickerView","props","indexes","pickObj","setValue","Sheet","ensureHandler","onEnsure","button","Button","TestPicker","values1","setValues1","values2","setValues2","textAlign","margin","console","log","_defineProperties","target","i","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","Constructor","protoProps","staticProps","prototype","eventList","willPreventDefault","willNotPreventDefault","$ele","isPassiveSupported","passiveSupported","passive","capture","start","move","end","window","touchstart","touchmove","touchend","mousedown","mousemove","mouseup","keys","forEach","pd","indexOf","addEventListener","removeEventListener","Transition","name","isShow","children","time","initName","transitionName","setName","isConShow","setConShow","setTimeout","React","Children","child","childTs","cloneElement","setIsShow","ShowSomething","showSomething","closeSheet","renderElement","SheetContent","destroy","onClick","header","titleTxt"],"mappings":"iKA2EeA,E,WA3DX,WAAYC,EAAeC,GAAiB,yBAV5CC,cAU2C,OAN3CC,iBAM2C,OAL3CF,YAK2C,OAJ3CG,UAI2C,OAH3CC,UAG2C,OAF3CC,WAE2C,EACvCC,KAAKJ,YAAc,GACnBI,KAAKN,OAASA,EACdM,KAAKL,SAAW,CACZM,YAAeR,EAAQO,KAAKJ,YAC5BM,WAAY,QAEhBF,KAAKH,KAAO,EACZG,KAAKF,KAAO,EACZE,KAAKD,OAAQ,E,kEAIb,IAAII,EAAiBC,EACfC,EAAgBL,KAAKL,SAASM,WAC9BK,GAAiBN,KAAKN,OAASM,KAAKJ,YAE1C,GAAIS,EAAgB,EAChBF,EAAkB,EAClBC,EAAgB,OACb,GAAIC,EAAgBC,EACvBH,EAAkBG,EAClBF,EAAgBJ,KAAKN,WAClB,CACH,IAAMa,EAAaC,KAAKC,IAAID,KAAKE,MAAML,EAAgBL,KAAKJ,cAC5DO,GAAoBI,EAAaP,KAAKJ,YACtCQ,EAAgBG,EAGpB,MAAO,CAAEH,gBAAeD,qB,8BAGpBQ,GACJX,KAAKH,KAAOe,YAAcD,GAAGE,MAC7Bb,KAAKF,KAAOE,KAAKL,SAASM,WAC1BD,KAAKD,OAAQ,I,6BAGVY,GACH,GAAIX,KAAKD,MAAO,CACZ,IAAME,EAAaW,YAAcD,GAAGE,MAAQb,KAAKH,KACjDG,KAAKL,SAAW,CACZM,WAAYA,EAAaD,KAAKF,KAC9BI,WAAY,W,8BAMpBF,KAAKD,OAAQ,EADD,MAE+BC,KAAKc,sBAAxCV,EAFI,EAEJA,cAAeD,EAFX,EAEWA,gBAKvB,OAJAH,KAAKL,SAAW,CACZM,WAAYE,EACZD,WAAY,YAETE,M,aCzDA,SAASW,EAAT,GAA6D,IAEpEC,EAF2BC,EAAwC,EAAxCA,KAAMC,EAAkC,EAAlCA,MAAOC,EAA2B,EAA3BA,SAU5C,IAAMC,EANN,SAA4BH,EAAkBC,GAC1C,IAAIzB,EAAQwB,EAAKI,WAAU,SAAAC,GAAG,OAAIA,EAAIJ,QAAUA,KAEhD,OAAO,IAAI1B,EADXC,GAAmB,IAAXA,EAAe,EAAIA,EACKwB,EAAKM,OAAO,GAG5BC,CAAkBP,EAAMC,GAV2B,EAWvCO,mBAASL,EAAYzB,UAXkB,mBAWhEA,EAXgE,KAWtD+B,EAXsD,KAajEC,EAAiB,SAAChB,GACpBS,EAAYQ,QAAQjB,IAGlBkB,EAAgB,SAAClB,GACnBA,EAAEmB,kBACFnB,EAAEoB,iBACFX,EAAYY,OAAOrB,GACnBe,EAAYN,EAAYzB,WAGtBsC,EAAe,SAACtB,GAClB,IAAMP,EAAgBgB,EAAYc,QAClCR,EAAYN,EAAYzB,UACxB,IAAMuB,EAAQD,EAAKb,GAAec,MACV,oBAAbC,GACPA,EAASD,IAajB,OATAiB,qBAAU,WACN,IAAMC,EAAe,IAAIC,IAAarB,GAGtC,OAFAoB,EAAaE,gBAAgBX,EAAgBE,EAAeI,GAC5DG,EAAaG,mBACN,WACHH,EAAaI,oBAElB,IAEI,yBAAKC,UAAU,kBAClB,yBACIA,UAAU,sBACVC,IAAK,SAAAC,GAAG,OAAI3B,EAAS2B,KAEzB,yBACIF,UAAU,sBACVG,MAAO,CACH1C,WAAYP,EAASO,WACrB2C,UAAU,cAAD,OAAgBlD,EAASM,WAAzB,SAGTgB,EAAK6B,KAAI,SAAAC,GAAI,OAAG,yBAAKN,UAAU,kBAC3BO,IAAKD,EAAK7B,OAAQ6B,EAAKE,YCxB5BC,MAjCf,YAAmE,IAAlDC,EAAiD,EAAjDA,KAAMC,EAA2C,EAA3CA,OAAQX,EAAmC,EAAnCA,UAAWtB,EAAwB,EAAxBA,SAAwB,EAE9BM,mBAAS,CAAC,GAAI,KAFgB,mBAEvD4B,EAFuD,KAE3CC,EAF2C,KAWxDC,EAAmB,SAACC,GAAD,OAAiB,SAACtC,EAAeuC,GACtDH,GAAU,SAACI,GAEP,OADAA,EAASC,OAAOH,EAAK,EAAGtC,GACjBwC,KAEXvC,GAAYA,EAASkC,KAGnBO,EAAe,qBAAiBnB,GAAa,IAEnD,OAAO,yBAAKA,UAAWmB,GAEfT,EAAKL,KAAI,SAAC7B,EAAMuC,GAAP,OAAe,kBAACzC,EAAD,CACpBiC,IAAKQ,EACLtC,MAAOkC,EAAOI,GACdvC,KAAMA,EACNE,SAAUoC,EAAiBC,U,eCQ5BK,MA7Bf,SAAoBC,GAAyB,IAAD,EAEZrC,mBAAS,CAAC2B,OAAQ,GAAIW,QAAS,KAFnB,mBAEjCC,EAFiC,KAExBC,EAFwB,KAiBxC,OAAO,kBAACC,EAAA,EAAD,CACHC,cAdkB,WACY,oBAAnBL,EAAMM,UACbN,EAAMM,SAASJ,EAAQZ,OAAQY,EAAQD,UAa3CM,OAAQ,kBAACC,EAAA,EAAD,4BACR,kBAAC,EAAD,CACI7B,UAAU,kBACVU,KAAMW,EAAMX,KACZC,OAAQU,EAAMV,OACdjC,SAdc,SAACiC,EAAuBW,GAC1CE,EAAS,CAAEb,SAAQW,YACW,oBAAnBD,EAAM3C,UACb2C,EAAM3C,SAASiC,EAAQW,QC1B7BZ,EAAO,CACT,CACI,CACIjC,MAAO,IACP+B,MAAO,SACT,CACE/B,MAAO,IACP+B,MAAO,SACT,CACE/B,MAAO,IACP+B,MAAO,SACT,CACE/B,MAAO,IACP+B,MAAO,SACT,CACE/B,MAAO,IACP+B,MAAO,UAEZ,CACC,CACI/B,MAAO,KACP+B,MAAO,iBACT,CACE/B,MAAO,KACP+B,MAAO,iBACT,CACE/B,MAAO,KACP+B,MAAO,iBACT,CACE/B,MAAO,KACP+B,MAAO,iBACT,CACE/B,MAAO,KACP+B,MAAO,mBA8CJsB,UAxCI,WAAO,IAAD,EAES9C,mBAAS,CAAC,IAAK,OAFxB,mBAEd+C,EAFc,KAELC,EAFK,OAGShD,mBAAS,CAAC,IAAK,OAHxB,mBAGdiD,EAHc,KAGLC,EAHK,KAoBrB,OAAO,6BACH,yBAAK/B,MAAO,CAACgC,UAAW,SAAUC,OAAQ,WACtC,oEACA,0EAEJ,kBAAC,EAAD,CACI1B,KAAMA,EACNC,OAAQoB,EACRrD,SAtBc,SAACiC,GACnBqB,EAAWrB,GACX0B,QAAQC,IAAI3B,MAsBZ,6BACA,kBAAC,EAAD,CACID,KAAMA,EACNC,OAAQsB,EACRvD,SAvBe,SAACiC,GACpBuB,EAAWvB,GACX0B,QAAQC,IAAI3B,IAsBRgB,SAnBc,SAAChB,GACnB0B,QAAQC,IAAI3B,S,gCC7DpB,SAAS4B,EAAkBC,EAAQnB,GACjC,IAAK,IAAIoB,EAAI,EAAGA,EAAIpB,EAAMvC,OAAQ2D,IAAK,CACrC,IAAIC,EAAarB,EAAMoB,GACvBC,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDC,OAAOC,eAAeP,EAAQE,EAAWnC,IAAKmC,IAInC,SAASM,EAAaC,EAAaC,EAAYC,GAG5D,OAFID,GAAYX,EAAkBU,EAAYG,UAAWF,GACrDC,GAAaZ,EAAkBU,EAAaE,GACzCF,EAbT,mC,2DCEMrD,E,WAOF,WAAYM,GAAsB,yBALlCmD,eAKiC,OAJjCC,wBAIiC,OAHjCC,2BAGiC,OAFjCC,UAEiC,EAC7BjG,KAAK8F,UAAY,GACjB,IAAMI,EAAqBC,cAC3BnG,KAAK+F,qBAAqBG,GAAqB,CAAEE,SAAS,EAAOC,SAAS,GAC1ErG,KAAKgG,wBAAwBE,GAAqB,CAAEE,SAAS,GAC7DpG,KAAKiG,KAAOtD,E,4DAGA2D,EAAiBC,EAAgBC,GACzC,iBAAkBC,OAClBzG,KAAK8F,UAAa,CACdY,WAAYJ,EACZK,UAAWJ,EACXK,SAAUJ,GAGdxG,KAAK8F,UAAa,CACde,UAAWP,EACXQ,UAAWP,EACXQ,QAASP,K,yCAKD,IAAD,OACfjB,OAAOyB,KAAKhH,KAAK8F,WAAWmB,SAAQ,SAAAjE,GAChC,IAAMkE,EAAKlE,EAAImE,QAAQ,SAAW,EAAI,EAAKpB,mBAAqB,EAAKC,sBACrE,EAAKC,KAAKmB,iBAAiBpE,EAAK,EAAK8C,UAAU9C,GAAakE,Q,uCAIlD,IAAD,OACb3B,OAAOyB,KAAKhH,KAAK8F,WAAWmB,SAAQ,SAAAjE,GAChC,EAAKiD,KAAKoB,oBAAoBrE,EAAK,EAAK8C,UAAU9C,W,KAK/CX,O,4DCtCA,SAASiF,EAAT,GAA4E,IAAvDC,EAAsD,EAAtDA,KAAMC,EAAgD,EAAhDA,OAAQC,EAAwC,EAAxCA,SAAwC,IAA9BC,YAA8B,MAAvB,IAAuB,EAEhFC,EAAWJ,GAAQ,GAF6D,EAIpD9F,mBAAS,IAJ2C,mBAI/EmG,EAJ+E,KAI/DC,EAJ+D,OAKtDpG,mBAAS+F,GAL6C,mBAK/EM,EAL+E,KAKpEC,EALoE,KAwBtF,OAjBA5F,qBAAU,WACFqF,GACAO,EAAWP,GACXQ,YAAW,WACPH,EAAQ,GAAD,OAAIF,EAAJ,WACR,MAEH7C,QAAQC,IAAI,OACZ8C,EAAQ,GAAD,OAAIF,EAAJ,UAEPK,YAAW,WACPH,EAAQ,IACRE,GAAW,KACZL,MAER,CAACF,IAEG,oCAECM,EACIG,IAAMC,SAASpF,IAAI2E,GAAU,SAACU,GAC1B,IAAMC,EAAUD,EAChB,OAAOF,IAAMI,aAAaD,EACtB,CACI3F,UAAU,GAAD,OAAM2F,EAAQtE,MAAMrB,UAApB,YAAiCmF,QAKpD,M,YC/BF,SAAS1D,EAAMJ,GAAoB,IAAD,EAClBrC,oBAAS,GADS,mBACvC+F,EADuC,KAC/Bc,EAD+B,OAEtB7G,mBAAS,IAAI8G,KAA9BC,EAFuC,oBAQxCC,EAAa,WACfH,GAAU,IAYdnG,qBAAU,WACNqG,EAAcE,cAAcC,MAGhCxG,qBAAU,WACN,OAAO,kBAAMqG,EAAcI,aAC5B,IAEH,IAAMD,EACF,kBAACrB,EAAD,CAAYC,KAAK,YAAYC,OAAQA,GACjC,yBAAK/E,UAAU,iBACX,yBAAKA,UAAU,iBAAiBoG,QA5BvB,WACjBP,GAAU,MA6BF,yBAAK7F,UAAU,kBAGPqB,EAAMgF,OACFhF,EAAMgF,OACN,yBAAKrG,UAAU,oBACX,yBAAKoG,QAASJ,GAAd,gBACA,6BAAM3E,EAAMiF,UAAY,IACxB,yBAAKF,QA9BZ,SAAClI,GAElBA,EAAEmB,kBACiC,oBAAxBgC,EAAMK,eACbL,EAAMK,gBAEVsE,MAwBwB,iBAIZ,yBACIhG,UAAU,kBACZqB,EAAM2D,aAMxB,OAAO,oCACH,yBAAKoB,QAAS,kBAAMP,GAAU,KAAQxE,EAAMO,S","file":"static/js/3.89255306.chunk.js","sourcesContent":["import { TouchEvent, MouseEvent } from 'react';\r\nimport { getEventPoint } from '../utils/base';\r\n\r\ntype PickerEvent = TouchEvent<HTMLDivElement> | MouseEvent<HTMLDivElement>;\r\n\r\nclass PickerControl {\r\n    colStyle: {\r\n        translateY: number,\r\n        transition: string\r\n    };\r\n    LINE_HEIGHT: number;\r\n    maxIdx: number\r\n    curY: number;\r\n    oldY: number;\r\n    isAnm: boolean;\r\n\r\n    constructor(index: number, maxIdx: number) {\r\n        this.LINE_HEIGHT = 26;\r\n        this.maxIdx = maxIdx\r\n        this.colStyle = {\r\n            translateY: - (index * this.LINE_HEIGHT),\r\n            transition: 'none',\r\n        }\r\n        this.curY = 0;\r\n        this.oldY = 0;\r\n        this.isAnm = false;\r\n    }\r\n\r\n    getFinallyTranslate() {\r\n        let adjustTranslate, adjustTranIdx;\r\n        const curTransLateY = this.colStyle.translateY;\r\n        const maxTranslate = - this.maxIdx * this.LINE_HEIGHT;\r\n\r\n        if (curTransLateY > 0) {\r\n            adjustTranslate = 0;\r\n            adjustTranIdx = 0;\r\n        } else if (curTransLateY < maxTranslate) {\r\n            adjustTranslate = maxTranslate;\r\n            adjustTranIdx = this.maxIdx;\r\n        } else {\r\n            const curPickIdx = Math.abs(Math.round(curTransLateY / this.LINE_HEIGHT));\r\n            adjustTranslate = - curPickIdx * this.LINE_HEIGHT;\r\n            adjustTranIdx = curPickIdx;\r\n        }\r\n\r\n        return { adjustTranIdx, adjustTranslate };\r\n    }\r\n\r\n    onStart(e: PickerEvent) {\r\n        this.curY = getEventPoint(e).pageY;\r\n        this.oldY = this.colStyle.translateY;\r\n        this.isAnm = true;\r\n    }\r\n\r\n    onMove(e: PickerEvent) {\r\n        if (this.isAnm) {\r\n            const translateY = getEventPoint(e).pageY - this.curY;\r\n            this.colStyle = {\r\n                translateY: translateY + this.oldY,\r\n                transition: 'none'\r\n            };\r\n        }\r\n    }\r\n\r\n    onEnd(): number {\r\n        this.isAnm = false;\r\n        const { adjustTranIdx, adjustTranslate } = this.getFinallyTranslate();\r\n        this.colStyle = {\r\n            translateY: adjustTranslate,\r\n            transition: 'all 0.3s'\r\n        }\r\n        return adjustTranIdx;\r\n    }\r\n}\r\n\r\nexport default PickerControl;","import React, { useState, useEffect, TouchEvent, MouseEvent } from 'react';\r\nimport PickerControl from '../../controller/picker';\r\n\r\nimport EventControl from '../../controller/event';\r\n\r\ninterface PickerColProps {\r\n    list: Array<any>,\r\n    value: ValueType,\r\n    onChange?: Function\r\n}\r\n\r\ntype ValueType = string | number;\r\ntype PickerEvent = TouchEvent<HTMLDivElement> | MouseEvent<HTMLDivElement>;\r\n\r\nexport default function PickerCol({list, value, onChange}: PickerColProps) {\r\n\r\n    let colRef: HTMLDivElement | null;\r\n\r\n    function initPickerControl (list: Array<any>, value: ValueType) {\r\n        let index = list.findIndex(val => val.value === value);\r\n        index = index === -1 ? 0 : index;\r\n        return new PickerControl(index, list.length-1);\r\n    }\r\n\r\n    const pickControl = initPickerControl(list, value);\r\n    const [colStyle, setColStyle] = useState(pickControl.colStyle)\r\n\r\n    const onStartHandler = (e: PickerEvent) => {\r\n        pickControl.onStart(e);\r\n    }\r\n\r\n    const onMoveHandler = (e: PickerEvent) => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        pickControl.onMove(e);\r\n        setColStyle(pickControl.colStyle);\r\n    }\r\n\r\n    const onEndHandler = (e: PickerEvent) => {\r\n        const adjustTranIdx = pickControl.onEnd();\r\n        setColStyle(pickControl.colStyle);\r\n        const value = list[adjustTranIdx].value;\r\n        if (typeof onChange === 'function') {\r\n            onChange(value)\r\n        }\r\n    }\r\n    \r\n    useEffect(() => {\r\n        const eventControl = new EventControl(colRef as HTMLDivElement);\r\n        eventControl.createEventList(onStartHandler, onMoveHandler, onEndHandler);\r\n        eventControl.listenerAllOfEle();\r\n        return () => {\r\n            eventControl.removeAllOfEle();\r\n        }\r\n    }, [])\r\n\r\n    return <div className=\"zui-picker-col\">\r\n        <div\r\n            className=\"zui-picker-col-mask\"\r\n            ref={ele => colRef = ele}>\r\n        </div>\r\n        <div\r\n            className=\"zui-picker-col-area\"\r\n            style={{\r\n                transition: colStyle.transition,\r\n                transform: `translateY(${colStyle.translateY}px)`,\r\n            }}>\r\n            {\r\n                list.map(item=> <div className=\"zui-picker-item\"\r\n                    key={item.value}>{item.label}</div>)\r\n            }\r\n        </div>\r\n    </div>\r\n}","import React, { useState } from 'react';\r\nimport PickerCol from './sub-views/PickerCol';\r\n\r\n// import { typeCheck } from '../utils/base';\r\n\r\nexport interface PickerProps {\r\n    data: Array<Array<{[key: string]: string}>>,\r\n    values: Array<string | number>,\r\n    className?: string,\r\n    onChange?: Function\r\n}\r\n\r\nfunction Picker({data, values, className, onChange}: PickerProps) {\r\n\r\n    const [pickValues, setValues] = useState(['', '']);\r\n\r\n    // if (typeCheck([\r\n    //     ['data', data, 'Array'],\r\n    //     ['values', values, 'Array'],\r\n    //     ['className', className, 'String', 'Undefined', 'Null'],\r\n    //     ['onChange', onChange, 'Function', 'Undefined', 'Null']\r\n    // ])) return null;\r\n\r\n    const colChangeHandler = (idx: number) => (value: string, pickIdx: number) => {\r\n        setValues((oldState) => {\r\n            oldState.splice(idx, 1, value);\r\n            return oldState;\r\n        })\r\n        onChange && onChange(pickValues);\r\n    }\r\n\r\n    const pickerClassName = `zui-picker ${className || ''}`\r\n\r\n    return <div className={pickerClassName}>\r\n        {\r\n            data.map((list, idx) => <PickerCol\r\n                key={idx}\r\n                value={values[idx]}\r\n                list={list}\r\n                onChange={colChangeHandler(idx)}\r\n            ></PickerCol>)\r\n        }\r\n    </div>\r\n}\r\n\r\nexport default Picker;","import React, { useState } from 'react';\r\n\r\nimport Sheet from './Sheet';\r\nimport Button from './Button';\r\nimport Picker from './Picker'\r\n\r\ninterface PickerViewProps {\r\n    data: Array<Array<{[key: string]: string}>>,\r\n    values: Array<string | number>,\r\n    onChange?: Function,\r\n    onEnsure?: Function\r\n}\r\n\r\ninterface GlobalAttr {\r\n    values: Array<string>,\r\n    indexes: Array<number>\r\n}\r\n\r\nfunction PickerView(props: PickerViewProps) {\r\n\r\n    const [pickObj, setValue] = useState({values: [], indexes: []} as GlobalAttr);\r\n\r\n    const ensureHandler = () => {\r\n        if (typeof props.onEnsure === 'function') {\r\n            props.onEnsure(pickObj.values, pickObj.indexes)\r\n        }\r\n    }\r\n\r\n    const changeHandler = (values: Array<string>, indexes: Array<number>) => {\r\n        setValue({ values, indexes });\r\n        if (typeof props.onChange === 'function') {\r\n            props.onChange(values, indexes)\r\n        }\r\n    }\r\n\r\n    return <Sheet\r\n        ensureHandler={ensureHandler}\r\n        button={<Button>弹出Picker</Button>}>\r\n        <Picker\r\n            className=\"zui-picker-view\"\r\n            data={props.data}\r\n            values={props.values}\r\n            onChange={changeHandler}\r\n        ></Picker>\r\n    </Sheet>\r\n}\r\n\r\nexport default PickerView;","import React, { useState } from 'react';\r\n\r\nimport Picker from '../../../views/Picker';\r\nimport PickerView from '../../../views/PickerView';\r\n\r\nconst data = [\r\n    [\r\n        {\r\n            value: '1',\r\n            label: 'test1'\r\n        },{\r\n            value: '2',\r\n            label: 'test2'\r\n        },{\r\n            value: '3',\r\n            label: 'test3'\r\n        },{\r\n            value: '4',\r\n            label: 'test4'\r\n        },{\r\n            value: '5',\r\n            label: 'test5'\r\n        },\r\n    ], [\r\n        {\r\n            value: '11',\r\n            label: '测试1'\r\n        },{\r\n            value: '22',\r\n            label: '测试2'\r\n        },{\r\n            value: '33',\r\n            label: '测试3'\r\n        },{\r\n            value: '44',\r\n            label: '测试4'\r\n        },{\r\n            value: '55',\r\n            label: '测试5'\r\n        },\r\n    ]\r\n]\r\n\r\n\r\nconst TestPicker = () => {\r\n\r\n    const [values1, setValues1] = useState(['2', '44']);\r\n    const [values2, setValues2] = useState(['3', '22']);\r\n\r\n\r\n    const changeHandler = (values) => {\r\n        setValues1(values);\r\n        console.log(values);\r\n    }\r\n\r\n    const changeHandler2 = (values) => {\r\n        setValues2(values);\r\n        console.log(values);\r\n    }\r\n\r\n    const ensureHandler = (values) => {\r\n        console.log(values);\r\n    }\r\n\r\n    return <div>\r\n        <div style={{textAlign: 'center', margin: '33px 0'}}>\r\n            <p>使用了 touch 事件</p>\r\n            <p>需使用手机模式</p>\r\n        </div>\r\n        <Picker\r\n            data={data}\r\n            values={values1}\r\n            onChange={changeHandler}>\r\n        </Picker>\r\n        <br></br>\r\n        <PickerView\r\n            data={data}\r\n            values={values2}\r\n            onChange={changeHandler2}\r\n            onEnsure={ensureHandler}>\r\n        </PickerView>\r\n    </div>\r\n}\r\n\r\nexport default TestPicker;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import { passiveSupported } from \"../utils/base\";\r\n\r\nclass EventControl {\r\n    \r\n    eventList: {[key: string]: Function};\r\n    willPreventDefault: object | boolean;\r\n    willNotPreventDefault: object | boolean;\r\n    $ele: HTMLDivElement;\r\n\r\n    constructor(ele: HTMLDivElement) {\r\n        this.eventList = {};\r\n        const isPassiveSupported = passiveSupported();\r\n        this.willPreventDefault = isPassiveSupported ? { passive: false, capture: false } : false;\r\n        this.willNotPreventDefault = isPassiveSupported ? { passive: true } : false;\r\n        this.$ele = ele;\r\n    }\r\n\r\n    createEventList(start: Function, move: Function, end: Function) {\r\n        if ('ontouchstart' in window) {\r\n            this.eventList =  {\r\n                touchstart: start,\r\n                touchmove: move,\r\n                touchend: end,\r\n            }\r\n        } else {\r\n            this.eventList =  {\r\n                mousedown: start,\r\n                mousemove: move,\r\n                mouseup: end,\r\n            }\r\n        }\r\n    }\r\n\r\n    listenerAllOfEle() {\r\n        Object.keys(this.eventList).forEach(key => {\r\n            const pd = key.indexOf('move') >= 0 ? this.willPreventDefault : this.willNotPreventDefault;\r\n            this.$ele.addEventListener(key, this.eventList[key] as any, pd as any);\r\n        })\r\n    }\r\n\r\n    removeAllOfEle() {\r\n        Object.keys(this.eventList).forEach(key => {\r\n            this.$ele.removeEventListener(key, this.eventList[key] as any);\r\n        })\r\n    }\r\n}\r\n\r\nexport default EventControl;\r\n","import React, {useState, useEffect} from 'react';\r\n\r\ninterface TransitionProps {\r\n    name: string,\r\n    isShow: boolean,\r\n    children: React.ReactNode,\r\n    time?: number\r\n}\r\n\r\nexport default function Transition({name, isShow, children, time = 300}: TransitionProps) {\r\n\r\n    const initName = name || '';\r\n\r\n    const [transitionName, setName] = useState('');\r\n    const [isConShow, setConShow] = useState(isShow);\r\n\r\n    useEffect(() => {\r\n        if (isShow) {\r\n            setConShow(isShow);\r\n            setTimeout(() => {\r\n                setName(`${initName}--in`);\r\n            }, 18); // 下一帧 > 16.67\r\n        } else {\r\n            console.log('out')\r\n            setName(`${initName}--out`);\r\n            // 正常关闭\r\n            setTimeout(() => {\r\n                setName('');\r\n                setConShow(false);\r\n            }, time);\r\n        }\r\n    }, [isShow])\r\n\r\n    return <>\r\n        {\r\n            isConShow ?\r\n                React.Children.map(children, (child) => {\r\n                    const childTs = child as React.DetailedReactHTMLElement<any, HTMLElement>;\r\n                    return React.cloneElement(childTs,\r\n                        {\r\n                            className:  `${childTs.props.className} ${transitionName}`,\r\n                        },\r\n                        // children // 外包裹\r\n                    )\r\n                })\r\n                : null\r\n        }\r\n    </>\r\n}\r\n","import React, { useState, ReactNode, MouseEvent, useEffect } from 'react';\r\nimport Transition from './Transition';\r\n\r\nimport { ShowSomething } from '../views-show/dialog';\r\n\r\ninterface SheetProps {\r\n    children: ReactNode,\r\n    button: ReactNode, // 触发Sheet的按钮\r\n    header?: ReactNode,\r\n    titleTxt?: string,\r\n    canModalClose?: boolean,\r\n    ensureHandler?: Function\r\n}\r\n\r\nexport default  function Sheet(props: SheetProps) {\r\n    const [isShow, setIsShow] = useState(false);\r\n    const [showSomething] = useState(new ShowSomething());\r\n\r\n    const modalHandler = () => {\r\n        setIsShow(false);\r\n    }\r\n\r\n    const closeSheet = () => {\r\n        setIsShow(false);\r\n    }\r\n\r\n    const clickHandler = (e: MouseEvent<HTMLElement>): void => {\r\n        // e.cancelBubble = true; // 阻止冒泡\r\n        e.stopPropagation(); // 阻止冒泡\r\n        if (typeof props.ensureHandler === 'function') {\r\n            props.ensureHandler();\r\n        }\r\n        closeSheet();\r\n    }\r\n\r\n    useEffect(() => {\r\n        showSomething.renderElement(SheetContent);\r\n    });\r\n\r\n    useEffect(() => {\r\n        return () => showSomething.destroy();\r\n    }, [])\r\n\r\n    const SheetContent = (\r\n        <Transition name=\"zui-sheet\" isShow={isShow}>\r\n            <div className='zui-sheet-box'>\r\n                <div className=\"zui-sheet-mask\" onClick={modalHandler}></div>\r\n                {/* sheet主体 */}\r\n                <div className=\"zui-sheet-area\">\r\n                    {/* 头部信息 */}\r\n                    {\r\n                        props.header ?\r\n                            props.header :\r\n                            <div className=\"zui-sheet-header\">\r\n                                <div onClick={closeSheet}>取消</div>\r\n                                <div>{props.titleTxt || ''}</div>\r\n                                <div onClick={clickHandler}>确定</div>\r\n                            </div>\r\n                    }\r\n                    {/* 内容部分 */}\r\n                    <div\r\n                        className=\"zui-sheet-body\"\r\n                    >{props.children}</div>\r\n                </div>\r\n            </div>\r\n        </Transition>\r\n    )\r\n    \r\n    return <>\r\n        <div onClick={() => setIsShow(true)}>{props.button}</div>\r\n    </>\r\n}\r\n"],"sourceRoot":""}