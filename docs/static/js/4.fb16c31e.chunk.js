(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{30:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(17),c=a(6),u=a(76),o=a(10),l=a(73),s=function(){function t(){Object(o.a)(this,t),this.data=void 0,this.colData=void 0,this.col=void 0,this.curIdx=void 0,this.data=[],this.colData=[],this.col=0,this.curIdx=0}return Object(l.a)(t,[{key:"getColData",value:function(){return this.colData}},{key:"getCurIdx",value:function(){return this.curIdx}},{key:"setCol",value:function(t){this.col=t}},{key:"setData",value:function(t){this.data=t}},{key:"addCurIdx",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.curIdx+=t}},{key:"setFirstRowData",value:function(){this.colData=this.data.slice(0,this.col).map((function(t){return[t]})),this.colData.length&&(this.curIdx=this.colData.length-1)}},{key:"_findLowCol",value:function(t){var e=t.map((function(t){return t.offsetTop})),a=Math.min.apply(Math,Object(u.a)(e));return e.indexOf(a)}},{key:"pushDataToLowCol",value:function(t){var e=this._findLowCol(t);this.addCurIdx(),this.colData[e].push(this.data[this.curIdx])}}]),t}();var f=function(t){var e=t.data,a=t.col,u=void 0===a?2:a,o=t.childRender,l=[],f=e.length,d=Array(u).fill("col").map((function(){return[]})),h=Object(n.useState)(d),m=Object(i.a)(h,2),p=m[0],v=m[1],y=new s;y.setData(e),y.setCol(u);var b=Object(n.useState)(y),g=Object(i.a)(b,1)[0],w=Object(n.useState)(0),j=Object(i.a)(w,2),D=j[0],x=j[1];return Object(n.useEffect)((function(){if(D<f-1){D<u-1?(g.setFirstRowData(),v(g.getColData())):(g.pushDataToLowCol(l),v(g.getColData()));var t=g.getCurIdx();Object(c.d)(e[t].url,(function(){x(t)}))}}),[D]),r.a.createElement("div",{className:"zui-waterfall zui-clearfix"},p.map((function(t,e){return r.a.createElement("div",{key:e,className:"zui-waterfall-col",style:{width:100/u+"%"}},t.map((function(t,a){return r.a.createElement("div",{key:"".concat(e,"-").concat(a),className:"zui-waterfall-item"},r.a.createElement("img",{className:"zui-waterfall-img",src:t.url}),"function"===typeof o?o(t):r.a.createElement("div",null,t.txt))})),r.a.createElement("div",{ref:function(t){return l[e]=t}}))})))},d=Array(21).fill("data").map((function(t,e){return{url:"https://zhongmeizhi.github.io/static/test/".concat(20-e,".jpg"),name:"\u7011\u5e03\u6d41",desc:"".concat(e)}}));function h(t){return r.a.createElement("div",null,r.a.createElement("p",{className:"zui-waterfall-txt"},t.name),r.a.createElement("p",{className:"zui-waterfall-txt"},t.desc))}e.default=function(){return r.a.createElement("div",null,r.a.createElement(f,{data:d,col:3,childRender:h}))}},73:function(t,e,a){"use strict";function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}a.d(e,"a",(function(){return r}))},76:function(t,e,a){"use strict";function n(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(e,"a",(function(){return n}))}}]);
//# sourceMappingURL=4.fb16c31e.chunk.js.map